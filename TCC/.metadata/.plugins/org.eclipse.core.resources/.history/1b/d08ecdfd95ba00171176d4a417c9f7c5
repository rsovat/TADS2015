package controller;

import java.io.IOException;
import java.util.List;

import javax.bluetooth.BluetoothStateException;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JLabel;

import bluetooth.DiscoveryDevices;
import models.ELM327ReadSensors;
import scanner.ConnectToDevice;
import scanner.ELM327;
import view.VeicheSetting;

public class ScreenMonitorController {
	private DiscoveryDevices discoveryDevices;
	private ELM327 elm327;
	private ELM327ReadSensors elm327ReadSensors;
	
	public ScreenMonitorController() throws BluetoothStateException, IOException {
		discoveryDevices = new DiscoveryDevices();
		discoveryDevices.discovery();
	}
	
	public void listarDevicesComboBox(JComboBox cbListDevices, JLabel lblStatus) {
		cbListDevices.removeAllItems();
		for (String device : discoveryDevices.getNamesRemoteDevices()) {
			cbListDevices.addItem(device);
		}
		lblStatus.setText(discoveryDevices.getStatus());
	}
	
	public void atualizarConexao() throws BluetoothStateException, IOException {
		discoveryDevices.discovery();
	}
	
	public void btnConnectar(int index, JLabel lblStatus) throws IOException {
//		ConnectToDevice connectToDevice = new ConnectToDevice(discoveryDevices);
//		elm327 = connectToDevice.connectToDevice(index);
//		lblStatus.setText(connectToDevice.getStatus());
////		System.out.println(index); //retorna -1 quando não há seleção
		
	}
	public void btnRealizarLeitura(JLabel lblRpm, JLabel lblTipoCumbustivel, 
			JLabel lblPressaoMotor,JLabel lblVelocidade) throws IOException, InterruptedException {
		lblRpm.setText("RPM: " + elm327.readRpm());
		lblTipoCumbustivel.setText("Tipo Combustível: " + elm327.readFindFuelType());
		lblPressaoMotor.setText("Pressão do Motor: " + elm327.readFuelPressure());
		lblVelocidade.setText("Velocidade: " + elm327.readSpeed());
		
	}
	
}
